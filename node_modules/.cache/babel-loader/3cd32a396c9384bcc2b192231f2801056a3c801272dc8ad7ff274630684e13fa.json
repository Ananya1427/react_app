{"ast":null,"code":"import React,{useEffect}from'react';import{Routes,Route}from'react-router-dom';import{useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{ToastContainer}from'react-toastify';import{onAuthStateChanged}from'firebase/auth';import{toast}from'react-toastify';import'react-toastify/dist/ReactToastify.css';import'./App.css';import{auth}from'./firebase';import{currentUser,getUsers}from'./Functions/Auth';import Nav from'./Components/Nav';import Home from'./Components/Home';import Login from'./Pages/Auth/Login';import Register from'./Pages/Auth/Register';import RegisterComplete from'./Pages/Auth/RegisterComplete';import ResetPassword from'./Pages/Auth/ResetPassword';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const dispatch=useDispatch();const navigate=useNavigate();useEffect(()=>{onAuthStateChanged(auth,async user=>{if(user){const idTokenResult=await user.getIdTokenResult();let options=[];let uaoptions=[];currentUser(user.email,idTokenResult.token).then(res=>{if(res.status===200){const{firstName,lastName,dob,gender,email,contact,address,state,city,pinCode,role,_id}=res.data.user;const{idToken}=res.config.headers;switch(role){case'admin':options=['Dashboard','Add Restaurant','Manage Restaurants','Manage Users','Profile'];break;case'restaurant':options=['Dashboard','Create Category','Manage Categories','Manage Users','Profile'];break;case'crew':options=['Dashboard','Current Order','Orders History','Profile'];break;default:options=['Dashboard','Current Order','Orders History','Profile'];break;};dispatch({type:'LOGGED_IN_USER',payload:{firstName,lastName,dob,gender,email,contact,address,state,city,pinCode,role,_id,options,uaoptions,token:idToken}});if(role==='crew'){navigate('/crew-dashboard');}else if(role==='admin'){getUsers(idTokenResult.token).then(res=>{if(res.status===200){dispatch({type:'REGISTERED_USERS',payload:res.data.users});navigate('/');}}).catch(error=>toast.error(error));}else if(role==='restaurant'){navigate('/restaurant-dashboard');}else{navigate('/');}}else{toast.error(res.data.message);}}).catch(error=>toast.error(error));}else{dispatch({type:'LOGOUT',payload:null});}});});return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/sign-in\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/create-account\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/register-complete\",element:/*#__PURE__*/_jsx(RegisterComplete,{})}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/reset-password\",element:/*#__PURE__*/_jsx(ResetPassword,{})})]})]});};export default App;","map":{"version":3,"names":["React","useEffect","Routes","Route","useDispatch","useNavigate","ToastContainer","onAuthStateChanged","toast","auth","currentUser","getUsers","Nav","Home","Login","Register","RegisterComplete","ResetPassword","jsx","_jsx","jsxs","_jsxs","App","dispatch","navigate","user","idTokenResult","getIdTokenResult","options","uaoptions","email","token","then","res","status","firstName","lastName","dob","gender","contact","address","state","city","pinCode","role","_id","data","idToken","config","headers","type","payload","users","catch","error","message","className","children","exact","path","element"],"sources":["/Users/venkat/Downloads/react/Food_App/react_app/src/App.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport './App.css';\nimport { auth } from './firebase';\nimport { currentUser, getUsers } from './Functions/Auth';\nimport Nav from './Components/Nav';\nimport Home from './Components/Home';\nimport Login from './Pages/Auth/Login';\nimport Register from './Pages/Auth/Register';\nimport RegisterComplete from './Pages/Auth/RegisterComplete';\nimport ResetPassword from './Pages/Auth/ResetPassword';\n\nconst App = () => {\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tonAuthStateChanged(auth, async (user) => {\n\t\t\tif (user) {\n\t\t\t\tconst idTokenResult = await user.getIdTokenResult();\n\t\t\t\tlet options = [];\n\t\t\t\tlet uaoptions = [];\n\n\t\t\t\tcurrentUser(user.email, idTokenResult.token)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\tconst { firstName, lastName, dob, gender, email, contact, address, state, city, pinCode, role, _id } = res.data.user;\n\t\t\t\t\t\t\tconst { idToken } = res.config.headers;\n\t\t\t\t\t\t\tswitch (role) {\n\t\t\t\t\t\t\t\tcase 'admin': options = ['Dashboard', 'Add Restaurant', 'Manage Restaurants', 'Manage Users', 'Profile'];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'restaurant': options = ['Dashboard', 'Create Category', 'Manage Categories', 'Manage Users', 'Profile'];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'crew': options = ['Dashboard', 'Current Order', 'Orders History', 'Profile'];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault: options = ['Dashboard', 'Current Order', 'Orders History', 'Profile'];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\ttype: 'LOGGED_IN_USER',\n\t\t\t\t\t\t\t\tpayload: { firstName, lastName, dob, gender, email, contact, address, state, city, pinCode, role, _id, options, uaoptions, token: idToken }\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (role === 'crew') {\n\t\t\t\t\t\t\t\tnavigate('/crew-dashboard');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (role === 'admin') {\n\t\t\t\t\t\t\t\tgetUsers(idTokenResult.token)\n\t\t\t\t\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: 'REGISTERED_USERS',\n\t\t\t\t\t\t\t\t\t\t\t\tpayload: res.data.users\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\tnavigate('/');\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch((error) => toast.error(error))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (role === 'restaurant') {\n\t\t\t\t\t\t\t\tnavigate('/restaurant-dashboard');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tnavigate('/');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttoast.error(res.data.message);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => toast.error(error))\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: 'LOGOUT',\n\t\t\t\t\tpayload: null\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t});\n\n\treturn (\n\t\t<div className='App'>\n\t\t\t<Nav />\n\t\t\t<ToastContainer />\n\t\t\t<Routes>\n\t\t\t\t<Route exact path='/' element={<Home />} />\n\t\t\t\t<Route exact path='/sign-in' element={<Login />} />\n\t\t\t\t<Route exact path='/create-account' element={<Register />} />\n\t\t\t\t<Route exact path='/register-complete' element={<RegisterComplete />} />\n\t\t\t\t<Route exact path='/reset-password' element={<ResetPassword />} />\n\t\t\t</Routes>\n\t\t</div>\n\t);\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}