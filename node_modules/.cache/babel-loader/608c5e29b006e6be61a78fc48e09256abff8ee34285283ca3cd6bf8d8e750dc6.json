{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router';import{useSelector}from'react-redux';import{toast}from'react-toastify';import{auth}from'../../firebase';import{checkUser}from'../../Functions/Auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ResetPassword=_ref=>{let{history}=_ref;const navigate=useNavigate();const[email,setEmail]=useState('');const[loading,setLoading]=useState('');const{user}=useSelector(state=>({...state}));useEffect(()=>{if(user&&user.token)history.push('/');},[user,history]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);checkUser(email).then(res=>{if(res.status===202){toast.error(res.data.message);navigate('/create-account');setLoading(false);}else{resetPassword();}}).catch(error=>{toast.error(error);setLoading(false);});};const resetPassword=async()=>{const config={url:process.env.REACT_APP_LOGIN_REDIRECT_URL,handleCodeInApp:true};await auth.generatePasswordResetLink(email,config).then(()=>{setEmail('');setLoading(false);toast.success('Check your email for password reset link');}).catch(error=>{setLoading(false);toast.error(error.message);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 pt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-10 offset-1 shadow p-lg-5 p-md-4 p-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-4 text-center\",children:loading?/*#__PURE__*/_jsx(\"h3\",{children:\"Loading..\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Forgot Password\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-xl-5 my-3 row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"col-md-3 d-none d-md-block col-form-label text-end fw-bold fs-6\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8 col-12 mb-3 mb-md-1 p-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"Your email\",autoFocus:true})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-5 col-6 offset-md-3 text-start p-0\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised btn-outline-success fw-bold\",type:\"submit\",disabled:!email,children:\"Reset Password\"})})})]})})})});};export default ResetPassword;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSelector","toast","auth","checkUser","jsx","_jsx","jsxs","_jsxs","ResetPassword","_ref","history","navigate","email","setEmail","loading","setLoading","user","state","token","push","handleSubmit","e","preventDefault","then","res","status","error","data","message","resetPassword","catch","config","url","process","env","REACT_APP_LOGIN_REDIRECT_URL","handleCodeInApp","generatePasswordResetLink","success","className","children","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","autoFocus","disabled"],"sources":["/Users/venkat/Downloads/react/Food_App/react_app/src/Pages/Auth/ResetPassword.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router';\nimport { useSelector } from 'react-redux';\nimport { toast } from 'react-toastify';\n\nimport { auth } from '../../firebase';\nimport { checkUser } from '../../Functions/Auth';\n\nconst ResetPassword = ({ history }) => {\n\tconst navigate = useNavigate();\n\tconst [email, setEmail] = useState('');\n\tconst [loading, setLoading] = useState('');\n\tconst { user } = useSelector((state) => ({ ...state }));\n\n\tuseEffect(() => {\n\t\tif (user && user.token) history.push('/');\n\t}, [user, history]);\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\tsetLoading(true);\n\t\tcheckUser(email)\n\t\t\t.then((res) => {\n\t\t\t\tif (res.status === 202) {\n\t\t\t\t\ttoast.error(res.data.message);\n\t\t\t\t\tnavigate('/create-account');\n\t\t\t\t\tsetLoading(false);\n\t\t\t\t} else {\n\t\t\t\t\tresetPassword();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\ttoast.error(error);\n\t\t\t\tsetLoading(false);\n\t\t\t});\n\t};\n\n\tconst resetPassword = async () => {\n\t\tconst config = {\n\t\t\turl: process.env.REACT_APP_LOGIN_REDIRECT_URL,\n\t\t\thandleCodeInApp: true,\n\t\t};\n\t\tawait auth\n\t\t\t.generatePasswordResetLink(email, config)\n\t\t\t.then(() => {\n\t\t\t\tsetEmail('');\n\t\t\t\tsetLoading(false);\n\t\t\t\ttoast.success('Check your email for password reset link');\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tsetLoading(false);\n\t\t\t\ttoast.error(error.message);\n\t\t\t});\n\t}\n\n\treturn (\n\t\t<div className='container mt-5'>\n\t\t\t<div className='row mt-5 pt-5'>\n\t\t\t\t<div className='col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-10 offset-1 shadow p-lg-5 p-md-4 p-3'>\n\t\t\t\t\t<form onSubmit={handleSubmit} className='container-fluid'>\n\t\t\t\t\t\t<div className='form-group mb-4 text-center'>\n\t\t\t\t\t\t\t{loading ? <h3>Loading..</h3> : <h3>Forgot Password</h3>}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='form-group my-xl-5 my-3 row'>\n\t\t\t\t\t\t\t<label htmlFor='email' className='col-md-3 d-none d-md-block col-form-label text-end fw-bold fs-6'>Email</label>\n\t\t\t\t\t\t\t<div className='col-md-8 col-12 mb-3 mb-md-1 p-0'>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\tid='email'\n\t\t\t\t\t\t\t\t\tclassName='form-control'\n\t\t\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t\t\t\tplaceholder='Your email'\n\t\t\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='form-group row'>\n\t\t\t\t\t\t\t<div className='col-md-5 col-6 offset-md-3 text-start p-0'>\n\t\t\t\t\t\t\t\t<button className='btn btn-raised btn-outline-success fw-bold' type='submit' disabled={!email}>\n\t\t\t\t\t\t\t\t\tReset Password\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default ResetPassword;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}