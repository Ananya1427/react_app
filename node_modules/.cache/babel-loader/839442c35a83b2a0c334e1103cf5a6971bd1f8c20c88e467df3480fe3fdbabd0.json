{"ast":null,"code":"import React,{useState}from'react';import{toast}from'react-toastify';import{sendSignInLinkToEmail}from'firebase/auth';import{useNavigate}from'react-router-dom';import'./Auth.css';import{auth}from'../../firebase';import{checkUser}from'../../Functions/Auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const navigate=useNavigate();const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const handleSubmit=async e=>{e.preventDefault();setLoading(true);checkUser(email).then(res=>{if(res.status===200){userRedirect(res.data.role);}else{const config={url:process.env.REACT_APP_REGISTER_REDIRECT_URL,handleCodeInApp:true};sendSignInLinkToEmail(auth,email,config).then(()=>{toast.success(\"Email is sent to \".concat(email,\". Click the link to complete your registration.\"));navigate('/');}).catch(error=>{window.alert(error);navigate('/');});}}).catch(error=>{toast.error(error);setLoading(false);});const userRedirect=role=>{if(role==='user'||role==='admin'){toast.error(\"You're already registered as \".concat(role));navigate('/sign-in');}setLoading(false);};window.localStorage.setItem('email',email);};return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row mt-5 pt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-10 offset-1 shadow p-lg-5 p-md-4 p-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-4 text-center\",children:loading?/*#__PURE__*/_jsx(\"h3\",{children:\"Loading...\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Registration\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group my-3 row\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"col-md-3 d-none d-md-block col-form-label text-end fw-bold fs-6\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8 col-12 mb-3 mb-md-1 p-0\",children:/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",className:\"form-control w-100\",value:email,onChange:e=>setEmail(e.target.value),placeholder:\"abc@example.com\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-6 offset-md-3 text-start p-0\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-raised btn-filled\",type:\"submit\",disabled:!email,children:\"Register\"})})})]})})})});};export default Register;","map":{"version":3,"names":["React","useState","toast","sendSignInLinkToEmail","useNavigate","auth","checkUser","jsx","_jsx","jsxs","_jsxs","Register","navigate","email","setEmail","loading","setLoading","handleSubmit","e","preventDefault","then","res","status","userRedirect","data","role","config","url","process","env","REACT_APP_REGISTER_REDIRECT_URL","handleCodeInApp","success","concat","catch","error","window","alert","localStorage","setItem","className","children","onSubmit","htmlFor","id","type","value","onChange","target","placeholder","disabled"],"sources":["/Users/venkat/Downloads/react/Food_App/react_app/src/Pages/Auth/Register.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { sendSignInLinkToEmail } from 'firebase/auth';\nimport { useNavigate } from 'react-router-dom';\n\nimport './Auth.css';\nimport { auth } from '../../firebase';\nimport { checkUser } from '../../Functions/Auth';\n\nconst Register = () => {\n    const navigate = useNavigate();\n    const [email, setEmail] = useState('');\n    const [loading, setLoading] = useState(false);\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        setLoading(true);\n\n        checkUser(email)\n            .then((res) => {\n                if (res.status === 200) {\n                    userRedirect(res.data.role);\n                } else {\n                    const config = {\n                        url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\n                        handleCodeInApp: true,\n                    };\n                    sendSignInLinkToEmail(auth, email, config)\n                        .then(() => {\n                            toast.success(\n                                `Email is sent to ${email}. Click the link to complete your registration.`\n                            );\n                            navigate('/');\n                        })\n                        .catch(error => {\n                            window.alert(error);\n                            navigate('/');\n                        });\n                }\n            })\n            .catch((error) => {\n                toast.error(error);\n                setLoading(false);\n            });\n\n        const userRedirect = (role) => {\n            if (role === 'user' || role === 'admin') {\n                toast.error(`You're already registered as ${role}`);\n                navigate('/sign-in');\n            }\n            setLoading(false);\n        }\n        window.localStorage.setItem('email', email);\n    };\n\n    return (\n        <div className='container mt-5'>\n            <div className='row mt-5 pt-5'>\n                <div className='col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-10 offset-1 shadow p-lg-5 p-md-4 p-3'>\n                    <form onSubmit={handleSubmit} className='container-fluid'>\n                        <div className='form-group mb-4 text-center'>\n                            {loading ? <h3>Loading...</h3> : <h3>Registration</h3>}\n                        </div>\n                        <div className='form-group my-3 row'>\n                            <label htmlFor='email' className='col-md-3 d-none d-md-block col-form-label text-end fw-bold fs-6'>Email</label>\n                            <div className='col-md-8 col-12 mb-3 mb-md-1 p-0'>\n                                <input\n                                    id='email'\n                                    type='email'\n                                    className='form-control w-100'\n                                    value={email}\n                                    onChange={(e) => setEmail(e.target.value)}\n                                    placeholder='abc@example.com'\n                                />\n                            </div>\n                        </div>\n                        <div className='form-group row'>\n                            <div className='col-md-4 col-6 offset-md-3 text-start p-0'>\n                                <button className='btn btn-raised btn-filled' type='submit' disabled={!email}>\n                                    Register\n                                </button>\n                            </div>\n                        </div>\n\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Register;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}